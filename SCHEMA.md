# CS2 Command Schema (JSON)

This document describes the JSON format consumed by the Blazor app at runtime.

## Files and entry points

- **Manifest (loaded first)**: `CSConfigGenerator/wwwroot/data/manifest.json`
  - A JSON array of file paths (relative to `wwwroot/`) that contain command data.
- **Command data (loaded via manifest)**: `CSConfigGenerator/wwwroot/data/commandschema/all_commands.json`
  - Generated by the Python pipeline (`PIPELINE.md`).

Manual edits to generated files may be overwritten the next time the pipeline runs.

## Command list file format

Each command data file is a JSON array of objects with the following shape:

| Property | Type | Notes |
| --- | --- | --- |
| `command` | string | Exact console command/cvar name. |
| `consoleData` | object | Raw-ish data from the console snapshot. |
| `uiData` | object | Curated UI + typing info used by the app. |

## `consoleData`

| Property | Type | Notes |
| --- | --- | --- |
| `defaultValue` | string \| null | `null` means the entry is a command (not a cvar). |
| `flags` | string[] \| null | Raw flags from the console output. |
| `description` | string | Raw description text (may be empty). |
| `sourcedAt` | string \| null | ISO 8601 timestamp for when the snapshot was taken. |

Example:

```json
{
  "defaultValue": "0",
  "flags": ["sv", "cheat"],
  "description": "Enables cheats on the server.",
  "sourcedAt": "2025-07-30T00:00:00Z"
}
```

## `uiData` (common fields)

All `uiData` objects share these fields:

| Property | Type | Notes |
| --- | --- | --- |
| `label` | string | Display label (often same as `command`). |
| `helperText` | string | Human-friendly description (often derived from `consoleData.description`). |
| `type` | string | One of the supported types listed below. |
| `requiresCheats` | boolean | Whether the command requires cheats (typically derived from flags). |

## Supported `uiData.type` values

These are the types implemented in the app (`CSConfigGenerator/Models/*UiData`):

- `bool`
- `int`
- `float`
- `string`
- `command`
- `bitmask`
- `unknown`
- `color`
- `uint32`
- `uint64`
- `vector2`
- `vector3`

### Type-specific fields

#### `bool`

- `defaultValue`: boolean

#### `int`

- `defaultValue`: number (integer)
- `range` (optional in JSON): `{ "minValue": number|null, "maxValue": number|null, "step": number|null }`
  - The app will supply a default range if omitted.

#### `float`

- `defaultValue`: number
- `range` (optional in JSON): `{ "minValue": number|null, "maxValue": number|null, "step": number|null }`
  - The app will supply a default range if omitted.

#### `string`

- `defaultValue`: string

#### `command`

- `defaultValue`: typically `null` in generated data (the app ignores it).
- `arguments`: typically `[]` in generated data (currently ignored by the app; reserved for future UI).

#### `bitmask`

- `defaultValue`: number (integer)
- `options`: object (string→string map, may be empty)

#### `unknown`

- `defaultValue`: number or string (the app treats it as numeric but keeps the type “unknown”)

#### `color`

- `defaultValue`: string (usually a space-separated triple, e.g. `"-1.0 -1.0 -1.0"`)

#### `uint32` / `uint64`

- `defaultValue`: number (unsigned integer)

#### `vector2`

- `defaultValue`: string (space-separated pair, e.g. `"0.0 1.0"`)

#### `vector3`

- `defaultValue`: string (space-separated triple, e.g. `"0.0 1.0 2.0"`)
- `range` (optional in JSON): `{ "minValue": number|null, "maxValue": number|null, "step": number|null }`
  - The app will supply a permissive default if omitted.

## Related

- **[PIPELINE.md](PIPELINE.md)**: How the JSON is generated
- **[PROPOSAL.md](PROPOSAL.md)**: Rationale for the polymorphic `UiData` model
