# CS2 Command Schema (JSON)

This document describes the JSON format consumed by the Blazor app at runtime.

## Files and entry points

- **Manifest (loaded first)**: `CSConfigGenerator/wwwroot/data/manifest.json`
  - A JSON array of file paths (relative to `wwwroot/`) that contain command data.
- **Command data (loaded via manifest)**: `CSConfigGenerator/wwwroot/data/commandschema/all_commands.json`
  - Generated by the Python pipeline (`PIPELINE.md`).

Manual edits to generated files may be overwritten the next time the pipeline runs.

## Command list file format

Each command data file is a JSON array of objects with the following shape:

| Property | Type | Notes |
| --- | --- | --- |
| `command` | string | Exact console command/cvar name. |
| `consoleData` | object | Raw-ish data from the console snapshot. |
| `typeInfo` | object | Type classification and metadata used by the app. |

## `consoleData`

| Property | Type | Notes |
| --- | --- | --- |
| `defaultValue` | string \| null | `null` means the entry is a command (not a cvar). |
| `flags` | string[] \| null | Raw flags from the console output. |
| `description` | string | Raw description text (may be empty). |
| `sourcedAt` | string \| null | ISO 8601 timestamp for when the snapshot was taken. |

Example:

```json
{
  "defaultValue": "0",
  "flags": ["sv", "cheat"],
  "description": "Enables cheats on the server.",
  "sourcedAt": "2025-07-30T00:00:00Z"
}
```

## `typeInfo` (common fields)

All `typeInfo` objects share these fields:

| Property | Type | Notes |
| --- | --- | --- |
| `type` | string | One of the supported types listed below. |
| `description` | string \| null | Optional custom description. If null/empty, use `consoleData.description`. |

**Derived at runtime** (not stored in JSON):
- **Display label**: Use the root `command` field directly.
- **Requires cheats**: Check if `consoleData.flags` contains `"cheat"`.
- **Typed default value**: Parse `consoleData.defaultValue` using the `type`.

## Supported `typeInfo.type` values

These are the types implemented in the app (`CSConfigGenerator/Models/*TypeInfo`):

- `bool`
- `int`
- `float`
- `string`
- `command`
- `bitmask`
- `unknown`
- `color`
- `uint32`
- `uint64`
- `vector2`
- `vector3`

### Type-specific fields

Note: `defaultValue` is **not** stored in `typeInfo`. The typed default is derived at runtime
by parsing `consoleData.defaultValue` according to the type.

#### `bool`

No additional fields.

#### `int`

- `range` (optional): `{ "minValue": number|null, "maxValue": number|null, "step": number|null }`
  - The app supplies a default range if omitted.

#### `float`

- `range` (optional): `{ "minValue": number|null, "maxValue": number|null, "step": number|null }`
  - The app supplies a default range if omitted.

#### `string`

No additional fields.

#### `command`

- `arguments`: typically `[]` (currently ignored by the app; reserved for future UI).

#### `bitmask`

- `options`: object (stringâ†’string map, may be empty)

#### `unknown`

No additional fields. The app treats the value as numeric.

#### `color`

No additional fields. Expects `consoleData.defaultValue` to be a space-separated triple (e.g. `"-1.0 -1.0 -1.0"`).

#### `uint32` / `uint64`

No additional fields.

#### `vector2`

No additional fields. Expects `consoleData.defaultValue` to be a space-separated pair (e.g. `"0.0 1.0"`).

#### `vector3`

- `range` (optional): `{ "minValue": number|null, "maxValue": number|null, "step": number|null }`
  - The app supplies a permissive default if omitted.

## Related

- **[PIPELINE.md](PIPELINE.md)**: How the JSON is generated
- **[PROPOSAL.md](PROPOSAL.md)**: Rationale for the polymorphic `TypeInfo` model
